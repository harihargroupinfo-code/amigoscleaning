<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AMIGOS Login</title>

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Arial, sans-serif;
}

body{
background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
min-height:100vh;
color:white;
}

/* TOP BAR */
.topbar{
display:flex;
justify-content:space-between;
align-items:center;
padding:10px 20px;
background:rgba(0,0,0,0.4);
backdrop-filter:blur(10px);
}

.logo{
display:flex;
align-items:center;
gap:10px;
}

.logo img{
height:40px;
}

.logo span{
font-size:20px;
font-weight:bold;
}

.nav a{
color:white;
margin-left:20px;
text-decoration:none;
font-weight:bold;
}

.nav a:hover{
color:#00f7ff;
}

/* CONTAINER */
.container{
max-width:400px;
margin:40px auto;
background:rgba(255,255,255,0.1);
padding:25px;
border-radius:15px;
backdrop-filter:blur(15px);
box-shadow:0 0 20px rgba(0,0,0,0.5);
}

h2{
text-align:center;
margin-bottom:20px;
animation: glow 2s infinite alternate;
}

@keyframes glow{
from{text-shadow:0 0 5px #00f7ff;}
to{text-shadow:0 0 20px #00f7ff;}
}

input,select,button{
width:100%;
padding:12px;
margin:10px 0;
border-radius:8px;
border:none;
font-size:14px;
}

button{
background:#00f7ff;
font-weight:bold;
cursor:pointer;
}

button:hover{
background:#00c0cc;
}

.link{
text-align:center;
margin-top:10px;
cursor:pointer;
color:#00f7ff;
}

.dashboard{
display:none;
padding:20px;
}

.card{
background:rgba(255,255,255,0.1);
padding:15px;
margin:10px 0;
border-radius:10px;
}

@media(max-width:480px){
.container{margin:20px;}
}
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
<div class="logo">
<img src="image/brand.png">
<span>AMIGOS</span>
</div>
<div class="nav">
<a href="#">Home</a>
<a href="#">Products</a>
<a href="#">Contact</a>
</div>
</div>

<!-- LOGIN -->
<div class="container" id="loginBox">
<h2>AMIGOS Login</h2>

<select id="role">
<option value="">Select Role</option>
<option value="admin">Admin</option>
<option value="distributor">Distributor</option>
<option value="retailer">Retailer</option>
</select>

<input type="text" id="mobile" placeholder="Enter Mobile Number">

<button onclick="sendOTP()">Send OTP</button>

<input type="text" id="otp" placeholder="Enter OTP">

<button onclick="login()">Login</button>

<div class="link" onclick="showSignup()">Sign Up Free</div>
</div>

<!-- SIGNUP -->
<div class="container" id="signupBox" style="display:none;">
<h2>Free Registration</h2>

<select id="signupRole">
<option value="">Select Role</option>
<option value="distributor">Distributor</option>
<option value="retailer">Retailer</option>
</select>

<input type="text" id="signupName" placeholder="Enter Name">
<input type="text" id="signupMobile" placeholder="Enter Mobile">

<button onclick="signup()">Register</button>

<div class="link" onclick="showLogin()">Back to Login</div>
</div>

<!-- DASHBOARD -->
<div class="dashboard" id="dashboard"></div>

<script>

let generatedOTP="";
let adminNumbers=["9146466898","8600051765"];

function showSignup(){
document.getElementById("loginBox").style.display="none";
document.getElementById("signupBox").style.display="block";
}

function showLogin(){
document.getElementById("signupBox").style.display="none";
document.getElementById("loginBox").style.display="block";
}

function signup(){
let role=document.getElementById("signupRole").value;
let name=document.getElementById("signupName").value;
let mobile=document.getElementById("signupMobile").value;

if(role==""||name==""||mobile==""){
alert("Fill all fields");
return;
}

let users=JSON.parse(localStorage.getItem("users"))||[];

if(users.find(u=>u.mobile==mobile)){
alert("Mobile already registered");
return;
}

let status= role=="distributor"?"pending":"approved";

users.push({role,name,mobile,status});
localStorage.setItem("users",JSON.stringify(users));

if(role=="distributor"){
alert("Thank you for registration. Your request is pending for approval.");
}else{
alert("Registration successful. You can login now.");
}

showLogin();
}

function sendOTP(){
let mobile=document.getElementById("mobile").value;
if(mobile==""){alert("Enter mobile");return;}

generatedOTP=Math.floor(1000+Math.random()*9000);
alert("Demo OTP: "+generatedOTP);
}

function login(){
let role=document.getElementById("role").value;
let mobile=document.getElementById("mobile").value;
let otp=document.getElementById("otp").value;

if(otp!=generatedOTP){
alert("Invalid OTP");
return;
}

if(role=="admin"){
if(adminNumbers.includes(mobile)){
showAdmin();
}else{
alert("Not authorized admin");
}
return;
}

let users=JSON.parse(localStorage.getItem("users"))||[];
let user=users.find(u=>u.mobile==mobile && u.role==role);

if(!user){
alert("You are not registered. Please register first.");
return;
}

if(role=="distributor" && user.status!="approved"){
alert("Your request is not approved yet.");
return;
}

showUser(user);
}

function showAdmin(){
document.getElementById("loginBox").style.display="none";
document.getElementById("dashboard").style.display="block";

let users=JSON.parse(localStorage.getItem("users"))||[];
let pending=users.filter(u=>u.role=="distributor" && u.status=="pending");

let html="<h2>Admin Dashboard</h2>";
html+="<div class='card'><b>Pending Distributor Requests</b>";

pending.forEach((u,i)=>{
html+=`<p>${u.name} - ${u.mobile} 
<button onclick="approve(${i})">Approve</button></p>`;
});

html+="</div>";

html+="<div class='card'><b>All Users</b>";
users.forEach(u=>{
if(u.status=="approved"){
html+=`<p>${u.name} - ${u.mobile} (${u.role})</p>`;
}
});
html+="</div>";

document.getElementById("dashboard").innerHTML=html;
}

function approve(index){
let users=JSON.parse(localStorage.getItem("users"))||[];
let pending=users.filter(u=>u.role=="distributor" && u.status=="pending");
let user=pending[index];
user.status="approved";
localStorage.setItem("users",JSON.stringify(users));
alert("Approved Successfully");
showAdmin();
}

function showUser(user){
document.getElementById("loginBox").style.display="none";
document.getElementById("dashboard").style.display="block";

let html=`<h2>Welcome ${user.name}</h2>`;
html+=`<div class="card">${user.role.toUpperCase()} Dashboard</div>`;

document.getElementById("dashboard").innerHTML=html;
}

</script>

</body>
</html>
